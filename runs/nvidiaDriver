#!/usr/bin/env bash
set -euo pipefail

# Skip on systems without NVIDIA GPU
if ! lspci 2>/dev/null | grep -qi nvidia; then
	echo "[nvidiaDriver] no NVIDIA GPU detected — skipping"
	exit 0
fi

if command -v pacman &>/dev/null; then
	sudo pacman -S --noconfirm --needed nvidia nvidia-utils nvidia-settings cuda
else
	echo "[nvidiaDriver] pacman not found — skipping (not Arch-based)"
	exit 0
fi

echo "[nvidiaDriver] verifying installation..."
nvidia-smi
nvcc --version
