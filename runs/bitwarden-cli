#!/usr/bin/env bash
set -euo pipefail

yay -S --noconfirm --needed bitwarden-cli jq

# Check login status and prompt if needed
status=$(bw status 2>/dev/null | jq -r '.status' 2>/dev/null || echo "unauthenticated")
if [[ "$status" == "unauthenticated" ]]; then
	echo ""
	echo "Bitwarden CLI installed. Log in to your vault:"
	echo ""
	bw login
fi
