[Deband-Medium]
deband-iterations=2
deband-threshold=64
deband-range=16
deband-grain=24

[Deband-Strong]
deband-iterations=3
deband-threshold=64
deband-range=16
deband-grain=24

[NNEDI3]
profile-desc=Suitable for most scenarios
glsl-shaders="~~/shaders/nnedi3_nns32_win8x4.glsl;~~/shaders/adasharp_luma.glsl"

[NNEDI3+]
profile-desc=Suitable for most scenarios
glsl-shaders="~~/shaders/nnedi3_nns64_win8x4.glsl;~~/shaders/adasharp_luma.glsl"

[Ravu-Zoom]
profile-desc=Suitable for most scenarios 
glsl-shaders="~~/shaders/ravu_z_ar_r3.glsl;~~/shaders/adasharp_luma.glsl"

[FSRCNNX]
profile-desc=Suitable for HD live action
glsl-shaders="~~/shaders/F8.glsl;~~/shaders/adasharp_luma.glsl"

[FSRCNNX+]
profile-desc=Suitable for SD live action
glsl-shaders="~~/shaders/nnedi3_nns32_win8x4.glsl;~~/shaders/F16.glsl"
	
[Ani4k]
profile-desc=Suitable for most anime
glsl-shaders="~~/shaders/Ani4Kv2_ArtCNN_C4F32_i2.glsl"

[AniSD]
profile-desc=Suitable for SD anime
glsl-shaders="~~/shaders/AniSD_ArtCNN_C4F32_i4.glsl"

[Anime4K]
profile-desc=Suitable for most anime
glsl-shaders="~~/shaders/krigbl.glsl;~~/shaders/A4K_Restore_CNN_Soft_M.glsl;~~/shaders/A4K_Clamp_Highlights.glsl"

### Conditional Profiles ###

[HDR]
profile-desc=HDR playback optimized for laptop display
profile-cond=(p["video-params/primaries"] == "bt.2020") and (p["video-params/gamma"] == "pq")
target-trc=pq
target-prim=bt.2020
target-peak=700
target-contrast=1000
hdr-compute-peak=yes
hdr-peak-percentile=99.995
tone-mapping=bt.2390
gamut-mapping-mode=relative
video-output-levels=full
target-colorspace-hint=yes 

#[SDR2HDR]
#profile-desc=SDR->HDR
#target-trc=pq
#target-peak=1000
#sub-hdr-peak=1000
#target-prim=bt.2020
#video-output-levels=full
#inverse-tone-mapping=yes
#target-colorspace-hint=auto	
#osd-font-size=55

#[HDR2SDR]
#profile-desc=HDR->SDR 
#profile-cond=(p["video-params/primaries"] == "bt.2020") and (p["video-params/gamma"] == "pq") and display_width == 1920 and display_height == 1080
#target-peak=203
#target-colorspace-hint=no
#tone-mapping=auto
#tone-mapping-param=1.0
#tone-mapping-max-boost=1.0
#gamut-mapping-mode=auto
#hdr-contrast-recovery=0.30
#hdr-contrast-smoothness=3.5
#hdr-compute-peak=auto
#hdr-peak-percentile=99.995
#hdr-peak-decay-rate=100
#hdr-scene-threshold-low=5.5 
#hdr-scene-threshold-high=10
#allow-delayed-peak-detect=no
	
[4k-Downscaling]
profile-desc=Optimized 4K downscaling for RTX 4060 Mobile
profile-cond=(height >= 2160 or width >= 3840)
profile-restore=copy-equal
glsl-shaders-clr
glsl-shaders="~~/shaders/ssimsr.glsl;~~/shaders/ssimds.glsl"
linear-downscaling=no
correct-downscaling=yes
dscale=lanczos
dscale-antiring=0.7

[Battery-Saver]
profile-desc=Power saving mode for battery usage
hwdec=nvdec-copy
interpolation=no
deband=no
glsl-shaders-clr
video-sync=audio
cache=no
demuxer-max-bytes=50MiB
vulkan-async-compute=no

[Ultra-Quality]
profile-desc=Maximum quality - RTX 4060 Mobile unleashed
hwdec=nvdec-copy
interpolation=yes
tscale=sphinx
deband=yes
deband-iterations=4
deband-threshold=28
deband-range=32
deband-grain=24
scale=ewa_lanczossharp
scale-antiring=0.7
cscale=ewa_lanczos
cscale-antiring=0.9
dscale=lanczos
dscale-antiring=0.8
correct-downscaling=yes
linear-downscaling=no
sigmoid-upscaling=yes
demuxer-max-bytes=800MiB

# Downmix profiles disabled - were causing audio distortion
# [Downmix-Audio-5.1]
# [Downmix-Audio-7.1]

### Hides unwanted webtorrent entries in memo script ### 

[Webtorrent-Entries]
profile-cond=string.match(string.lower(string.gsub(require "mp.utils".join_path(get("working-directory", ""), get("path", "")), string.gsub(get("filename", ""), "([^%w])", "%%%1").."$", "")), "webtorrent")
profile-restore=copy-equal
script-opts-append=memo-enabled=no

[High-Performance]
profile-desc=High quality balanced for laptop usage
hwdec=nvdec-copy
interpolation=yes
tscale=oversample
deband=yes
deband-iterations=3
deband-threshold=32
scale=ewa_lanczossharp
cscale=ewa_lanczos
dscale=lanczos
video-sync=display-resample
cache=yes
demuxer-max-bytes=300MiB

[Gaming-Laptop]
profile-desc=Optimized for gaming laptop with hybrid graphics
hwdec=nvdec-copy
gpu-api=vulkan
vulkan-async-compute=yes
vulkan-async-transfer=yes
interpolation=yes
video-sync=display-resample
target-peak=400
tone-mapping=hable

[Anime-Ultra]
profile-desc=Ultra quality for anime - aggressive deband
hwdec=nvdec-copy
interpolation=yes
tscale=oversample
deband=yes
deband-iterations=4
deband-threshold=28
deband-range=32
deband-grain=32
scale=ewa_lanczossharp
scale-antiring=0.7
cscale=ewa_lanczos
cscale-antiring=0.9
demuxer-max-bytes=400MiB

# Auto-Battery-Saver profile removed due to battery detection complexity
# Use manual profile switching with number keys 1-4 instead

[RTX-4060-Unleashed]
profile-desc=Maximum RTX 4060 Mobile utilization
hwdec=nvdec-copy
interpolation=yes
tscale=sphinx
tscale-window=sphinx
tscale-radius=1.0
deband=yes
deband-iterations=4
deband-threshold=24
deband-range=32
deband-grain=48
scale=ewa_lanczossharp
scale-antiring=0.7
cscale=ewa_lanczos
cscale-antiring=0.9
dscale=lanczos
dscale-antiring=0.8
vulkan-async-compute=yes
vulkan-async-transfer=yes
vulkan-queue-count=4
demuxer-max-bytes=1000MiB
cache-secs=60

[Laptop-Gaming]
profile-desc=Optimized for gaming while watching videos
hwdec=nvdec-copy
interpolation=no
deband=no
video-sync=audio
cache=no
demuxer-max-bytes=50MiB
scale=bilinear
dscale=bilinear

[4K-Optimized]
profile-desc=Optimized for 4K content
profile-cond=(height >= 2160 or width >= 3840)
profile-restore=copy-equal
hwdec=nvdec-copy
scale=ewa_lanczossharp
cscale=ewa_lanczos
dscale=lanczos
demuxer-max-bytes=1000MiB
cache-secs=60
deband-iterations=4

[Low-Latency]
profile-desc=Minimal latency for live streams
video-sync=audio
interpolation=no
cache=no
demuxer-max-bytes=16MiB
demuxer-readahead-secs=5
audio-buffer=0.05
untimed=yes